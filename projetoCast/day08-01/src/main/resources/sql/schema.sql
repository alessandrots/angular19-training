CREATE TABLE IF NOT EXISTS USUARIO (
  ID_USUARIO NUMBER(19,0) NOT NULL,
  NM_USUARIO VARCHAR2(100 CHAR) NOT NULL,
  EMAIL_USUARIO VARCHAR2(100 CHAR) NOT NULL,
  ST_ATIVO NUMBER(1,0) DEFAULT 1 NOT NULL,
  CONSTRAINT PK_USUA PRIMARY KEY (ID_USUARIO)
);

CREATE TABLE IF NOT EXISTS CATEGORIA (
  ID_CATEGORIA NUMBER(19,0) NOT NULL,
  NM_CATEGORIA VARCHAR2(100 CHAR) NOT NULL,
  DS_CATEGORIA VARCHAR2(200 CHAR),
  ST_ATIVO NUMBER(1,0) DEFAULT 1 NOT NULL,
  CONSTRAINT PK_CATE PRIMARY KEY (ID_CATEGORIA)
);

CREATE TABLE IF NOT EXISTS SERVICO (
  ID_SERVICO NUMBER(19,0) NOT NULL,
  NM_SERVICO VARCHAR2(100 CHAR) NOT NULL,
  DS_SERVICO VARCHAR2(200 CHAR),
  ST_ATIVO NUMBER(1,0) DEFAULT 1 NOT NULL,
  ID_CATEGORIA NUMBER(19,0) NOT NULL,
  CONSTRAINT PK_SERV PRIMARY KEY (ID_SERVICO),
  CONSTRAINT FK_SERV_CATE FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA (ID_CATEGORIA)
);

CREATE TABLE IF NOT EXISTS GRUPO_ATENDIMENTO (
  ID_GRUPO_ATENDIMENTO NUMBER(19,0) NOT NULL,
  NM_GRUPO_ATENDIMENTO VARCHAR2(100 CHAR) NOT NULL,
  ST_ATIVO NUMBER(1,0) DEFAULT 1 NOT NULL,
  ID_CATEGORIA NUMBER(19,0),
  CONSTRAINT PK_GRAT PRIMARY KEY (ID_GRUPO_ATENDIMENTO),
  CONSTRAINT FK_GRAT_CATE FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA (ID_CATEGORIA)
);

CREATE TABLE IF NOT EXISTS ITEM_GRUPO_ATENDIMENTO (
  ID_ITEM_GRUPO_ATENDIMENTO NUMBER(19,0) NOT NULL,
  ID_GRUPO_ATENDIMENTO NUMBER(19,0) NOT NULL,
  ID_SERVICO NUMBER(19,0) NOT NULL,
  CONSTRAINT PK_ITGA PRIMARY KEY (ID_ITEM_GRUPO_ATENDIMENTO),
  CONSTRAINT FK_ITGA_GRAT FOREIGN KEY (ID_GRUPO_ATENDIMENTO) REFERENCES GRUPO_ATENDIMENTO (ID_GRUPO_ATENDIMENTO),
  CONSTRAINT FK_ITGA_SERV FOREIGN KEY (ID_SERVICO) REFERENCES SERVICO (ID_SERVICO)
);

CREATE TABLE IF NOT EXISTS USUARIO_GRUPO_ATENDIMENTO (
  ID_USUARIO_GRUPO_ATENDIMENTO NUMBER(19,0) NOT NULL,
  ID_GRUPO_ATENDIMENTO NUMBER(19,0) NOT NULL,
  ID_USUARIO NUMBER(19,0) NOT NULL,
  DT_INICIO DATE NOT NULL,
  DT_FIM DATE,
  CONSTRAINT PK_USGA PRIMARY KEY (ID_USUARIO_GRUPO_ATENDIMENTO),
  CONSTRAINT FK_USGA_GRAT FOREIGN KEY (ID_GRUPO_ATENDIMENTO) REFERENCES GRUPO_ATENDIMENTO (ID_GRUPO_ATENDIMENTO),
  CONSTRAINT FK_USGA_USUA FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO)
);

CREATE TABLE IF NOT EXISTS PEDIDO (
  ID_PEDIDO NUMBER(19,0) NOT NULL,
  DS_TITULO VARCHAR2(200 CHAR) NOT NULL,
  TX_DESCRICAO VARCHAR2(4000 CHAR) NOT NULL,
  ST_URGENCIA NUMBER(1,0) NOT NULL,
  ST_STATUS CHAR(1) DEFAULT 'C' NOT NULL,
  DT_ABERTURA DATE NOT NULL,
  DT_FECHAMENTO DATE,
  ST_AVALIACAO NUMBER(1,0),
  TX_FECHAMENTO VARCHAR2(1000 CHAR),
  ID_USUARIO_ABERTURA NUMBER(19,0) NOT NULL,
  ID_USUARIO_SOLICITANTE NUMBER(19,0) NOT NULL,
  ID_USUARIO_ATENDENTE NUMBER(19,0),
  ID_USUARIO_FECHAMENTO NUMBER(19,0),
  ID_SERVICO NUMBER(19,0) NOT NULL,
  ID_GRUPO_ATENDIMENTO NUMBER(19,0),
  CONSTRAINT PK_PEDI PRIMARY KEY (ID_PEDIDO),
  CONSTRAINT FK_PEDI_USAB FOREIGN KEY (ID_USUARIO_ABERTURA) REFERENCES USUARIO (ID_USUARIO),
  CONSTRAINT FK_PEDI_USSO FOREIGN KEY (ID_USUARIO_SOLICITANTE) REFERENCES USUARIO (ID_USUARIO),
  CONSTRAINT FK_PEDI_USAT FOREIGN KEY (ID_USUARIO_ATENDENTE) REFERENCES USUARIO (ID_USUARIO),
  CONSTRAINT FK_PEDI_USFE FOREIGN KEY (ID_USUARIO_FECHAMENTO) REFERENCES USUARIO (ID_USUARIO),
  CONSTRAINT FK_PEDI_SERV FOREIGN KEY (ID_SERVICO) REFERENCES SERVICO (ID_SERVICO),
  CONSTRAINT FK_PEDI_GRAT FOREIGN KEY (ID_GRUPO_ATENDIMENTO) REFERENCES GRUPO_ATENDIMENTO (ID_GRUPO_ATENDIMENTO)
);

CREATE TABLE IF NOT EXISTS ANDAMENTO_PEDIDO (
  ID_ANDAMENTO_PEDIDO NUMBER(19,0) NOT NULL,
  TX_DESCRICAO VARCHAR2(4000 CHAR) NOT NULL,
  DT_REGISTRO DATE NOT NULL,
  ID_PEDIDO NUMBER(19,0) NOT NULL,
  ID_USUARIO NUMBER(19,0) NOT NULL,
  CONSTRAINT PK_ANPE PRIMARY KEY (ID_ANDAMENTO_PEDIDO),
  CONSTRAINT FK_ANPE_PEDI FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDO (ID_PEDIDO),
  CONSTRAINT FK_ANPE_USUA FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO (ID_USUARIO)
);

CREATE TABLE IF NOT EXISTS ARQUIVO_ANDAMENTO (
  ID_ARQUIVO_ANDAMENTO NUMBER(19,0) NOT NULL,
  NM_ARQUIVO VARCHAR2(100 CHAR) NOT NULL,
  AQ_CONTEUDO_ARQUIVO BLOB NOT NULL,
  DS_TIPO_CONTEUDO VARCHAR2(50 CHAR),
  ID_ANDAMENTO_PEDIDO NUMBER(19,0) NOT NULL,
  CONSTRAINT PK_ARAN PRIMARY KEY (ID_ARQUIVO_ANDAMENTO),
  CONSTRAINT FK_ARAN_PEDI FOREIGN KEY (ID_ANDAMENTO_PEDIDO) REFERENCES ANDAMENTO_PEDIDO (ID_ANDAMENTO_PEDIDO)
);



CREATE SEQUENCE IF NOT EXISTS SEQ_USUARIO MINVALUE 1 START WITH 1000 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE IF NOT EXISTS SEQ_CATEGORIA MINVALUE 1 START WITH 100 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE IF NOT EXISTS SEQ_SERVICO MINVALUE 1 START WITH 100 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE IF NOT EXISTS SEQ_GRUPO_ATENDIMENTO MINVALUE 1 START WITH 100 INCREMENT BY 1  NOCYCLE;
CREATE SEQUENCE IF NOT EXISTS SEQ_ITEM_GRUPO_ATENDIMENTO MINVALUE 1 START WITH 100 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE IF NOT EXISTS SEQ_USUARIO_GRUPO_ATENDIMENTO MINVALUE 1 START WITH 100 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE IF NOT EXISTS SEQ_PEDIDO MINVALUE 1 START WITH 100 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE IF NOT EXISTS SEQ_ANDAMENTO_PEDIDO MINVALUE 1 START WITH 100 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE IF NOT EXISTS SEQ_ARQUIVO_ANDAMENTO MINVALUE 1 START WITH 100 INCREMENT BY 1 NOCACHE NOCYCLE;
